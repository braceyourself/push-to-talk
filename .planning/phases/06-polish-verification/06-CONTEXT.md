# Phase 6: Polish & Verification - Context

**Gathered:** 2026-02-18
**Status:** Ready for planning

<domain>
## Phase Boundary

Verify and tune all pre-work features (STT filtering, tool-use speech suppression, overlay states) end-to-end. Most requirements are already coded — this phase confirms they work correctly in real usage and tunes thresholds. Also adds pre-tool acknowledgment clips and dynamic tool-use overlay.

</domain>

<decisions>
## Implementation Decisions

### STT False Trigger Filtering
- Balanced sensitivity — reject obvious non-speech but don't aggressively filter borderline audio
- Primary environment: quiet home office with occasional noise bursts (doorbell, dog, someone walking in)
- Priority annoyance: throat clearing and coughs being transcribed as words (more annoying than ambient noise triggers)
- Brief visual indicator in overlay when audio is rejected (not silent — flash/dim the listening state briefly so user knows audio was heard but filtered)

### Tool-Use Speech Flow
- Pre-tool spoken acknowledgment for noticeable waits only — skip for sub-second tool calls
- Acknowledgment delivered via pre-recorded clips (not live TTS) for instant playback, zero latency
- Clips generated by clip factory (same system as non-verbal fillers) — rotates and refreshes
- Pool of 10-15 acknowledgment phrases, mix of conversational ("let me check that") and brief ("one sec")
- Voice: same TTS voice model, close enough match is fine — slight variation is natural
- Long tool chains (10+ seconds): play non-verbal filler clips (reuse Phase 4 system) to indicate activity
- Speech suppression: allow brief natural transitions between tool groups, not strictly final-block-only
- Final response: direct answer only — no narration of what tools were used ("I checked the file and..." is out)

### Overlay State Polish
- Tool-use state should be dynamic and informative, not generic
- Show AI-summarized intent (e.g., "Checking the pipeline code") not tool names ("Read file")
- Live sequence — updates as each tool runs, showing progression of activity
- Status history panel: last 5-10 transitions
- History includes tool intents (richer than just state names): "thinking → Checking pipeline code → Running tests → speaking"
- Other states (listening, thinking, speaking, idle, muted) are fine as-is — just verify they render correctly

### Claude's Discretion
- Exact no_speech_prob threshold values (tune during verification)
- Visual treatment of the rejection indicator (dim, flash, icon — whatever fits overlay design)
- Acknowledgment phrase selection logic (when to use conversational vs brief)
- How to extract AI intent summary from stream-json tool_use events

</decisions>

<specifics>
## Specific Ideas

- Pre-tool acknowledgment modeled like a tool call — a fixed phrase pool the AI selects from before performing actual task tool use
- Non-verbal filler clips from Phase 4 reused for long tool-chain silences (no new system needed)
- Tool intent summaries should feel natural: "Looking into that" not "Executing Read tool on file"

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 06-polish-verification*
*Context gathered: 2026-02-18*
