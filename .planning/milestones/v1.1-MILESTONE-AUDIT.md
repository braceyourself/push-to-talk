---
milestone: v1.1
audited: 2026-02-18T20:15:00Z
status: passed
scores:
  requirements: 15/15
  phases: 4/4
  integration: 15/15 connected, 0 orphaned, 1 minor cosmetic gap
  flows: 5/5 (4 complete, 1 partial cosmetic)
gaps:
  requirements: []
  integration:
    - "Tool intent overlay has ~150ms timing window during barge-in (cosmetic, LOW impact)"
  flows: []
tech_debt:
  - phase: 05-barge-in
    items:
      - "VAD sensitivity tuning needs real-world testing (threshold 0.5 prob, 6 chunks)"
      - "Post-interrupt response timing perception (0.4s threshold) needs human validation"
  - phase: 06-polish-verification
    items:
      - "STT filtering thresholds need real-noise environment tuning"
      - "Acknowledgment clip gate timing (300ms) needs human perception testing"
---

# v1.1 Voice UX Polish — Milestone Audit

**Audited:** 2026-02-18
**Status:** PASSED

## Milestone Goal

Make the live voice session feel natural — fix filler conflicts, reduce false STT triggers, suppress stale tool narration, enable barge-in interruption.

## Requirements Coverage

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| FILL-01 | Remove Ollama smart filler generation | 4 | ✓ Satisfied |
| FILL-02 | Live session uses only acknowledgment phrase clips | 4→7 | ✓ Satisfied |
| FILL-03 | Clip factory subprocess generates clips via Piper | 4 | ✓ Satisfied |
| FILL-04 | Clip pool has size cap and rotation | 4 | ✓ Satisfied |
| FILL-05 | Clip factory evaluates naturalness | 4 | ✓ Satisfied |
| STT-01 | Whisper no_speech_prob filtering rejects non-speech | 6 | ✓ Satisfied |
| STT-02 | False trigger rate reduced | 6 | ✓ Satisfied |
| FLOW-01 | Tool-use text suppression | 6 | ✓ Satisfied |
| FLOW-02 | Inter-tool narration discarded via post_tool_buffer | 6 | ✓ Satisfied |
| BARGE-01 | User can interrupt AI mid-speech | 5 | ✓ Satisfied |
| BARGE-02 | VAD detects speech during playback without muting mic | 5 | ✓ Satisfied |
| BARGE-03 | Interruption cancels TTS playback and queued audio | 5 | ✓ Satisfied |
| BARGE-04 | Interrupted speech marked as interrupted in context | 5 | ✓ Satisfied |
| OVL-01 | All overlay status states render correctly | 6 | ✓ Satisfied |
| OVL-02 | Status history panel shows transitions with timestamps | 6 | ✓ Satisfied |

**Score: 15/15 requirements satisfied**

## Phase Verification Summary

| Phase | Name | Score | Status |
|-------|------|-------|--------|
| 4 | Filler System Overhaul | 5/5 | ✓ Passed |
| 5 | Barge-in | 10/10 | ✓ Passed |
| 6 | Polish & Verification | 5/5 | ✓ Passed |
| 7 | Nonverbal System Cleanup | 5/5 | ✓ Passed |

**Score: 4/4 phases passed**

## Cross-Phase Integration

**Report:** `.planning/v1.1-INTEGRATION-CHECK.md`

| Integration Point | Status | Details |
|-------------------|--------|---------|
| Phase 4→6→7: Filler evolution | ✓ Connected | Nonverbal → acknowledgment migration complete, all 3 _pick_filler calls use "acknowledgment" |
| Phase 5→7: Barge-in trailing filler | ✓ Connected | Fixed from broken "nonverbal" to working "acknowledgment" |
| Phase 5→6: Barge-in + tool-use | ⚠ Minor gap | Tool intent overlay has ~150ms timing window (cosmetic) |
| Phase 4→5: Filler + barge-in cancel | ✓ Connected | Generation ID mechanism coordinates cancellation |
| Phase 6→5: Overlay status after barge-in | ✓ Connected | Status file delivers speaking→listening transition |
| Phase 6→5: STT filtering + post-barge-in | ✓ Connected | Filtered audio doesn't reset silence timer or post_barge_in flag |

**Wiring: 15 connected exports, 0 orphaned, 1 minor cosmetic gap**

## E2E Flow Verification

| Flow | Status |
|------|--------|
| Normal conversation (PTT → STT → LLM → TTS → playback) | ✓ Complete |
| Barge-in (interrupt → trailing filler → annotation → shorter silence) | ✓ Complete |
| Tool-use (intent overlay → gated ack → suppress narration → final response) | ✓ Complete |
| Barge-in during tool-use (ack cancel → status update → continue) | ✓ Partial (cosmetic timing) |
| STT rejection (noise → 3-layer filter → overlay flash → no transcription) | ✓ Complete |

**Score: 5/5 flows verified**

## Gap Resolution from Previous Audit

The initial audit (pre-Phase 7) found 3 critical gaps. All resolved:

| Gap | Resolution | Phase |
|-----|-----------|-------|
| Barge-in trailing filler calls _pick_filler("nonverbal") → returns None | Changed to "acknowledgment" | Phase 7 (commit 45155e5) |
| Nonverbal clip generation code orphaned in clip_factory.py | Removed 6 functions, 5 constants | Phase 7 (commit 24e9e40) |
| FILL-02 requirement text doesn't match actual behavior | Updated to "acknowledgment phrase audio clips" | Phase 7 (commit 24e9e40) |

## Tech Debt (Non-blocking)

**Phase 5 (Barge-in) — Human tuning needed:**
- VAD sensitivity (threshold: 0.5 probability, 6 chunk sustained)
- Post-interrupt response timing (0.4s silence threshold)
- Trailing filler audio naturalness

**Phase 6 (Polish) — Human tuning needed:**
- STT filtering thresholds (no_speech_prob >= 0.6, avg_logprob < -1.0, compression_ratio > 2.4)
- Acknowledgment clip gate timing (300ms)
- Tool intent overlay label readability

**Integration — Cosmetic:**
- Tool intent overlay ~150ms persistence during barge-in (only on rare barge-in-during-tool-use interaction)

**Total: 7 items — all parameter tuning for real-world use, no functional blockers**

---
*Audited: 2026-02-18 (post-Phase 7 gap closure)*
